import{s as a,b as f,a as m,h as i}from"./loadingSpinner-D-kshPRo.js";import{s}from"./index-CWKkjwGO.js";import{s as d}from"./alertMessage-Dl9VQ_2y.js";async function l({email:n,password:r}){a();const t=JSON.stringify({email:n,password:r});try{const o=await fetch(f,{headers:m(),method:"POST",body:t});if(!o.ok){const c=await o.text();throw new Error(`Login failed: ${c}`)}const e=await o.json();return s("token",e.data.accessToken),s("user",e.data),e}catch(o){throw console.error("Login failed",o),o}finally{i()}}async function g(n){n.preventDefault();const r=document.forms.login,t=new FormData(r),o=Object.fromEntries(t.entries());a();try{const e=await l(o);d(`Hello ${e.data.name}`,3e3),setTimeout(()=>{window.location.href="./"},3e3)}catch(e){console.error("Login failed:",e),alert(`Login failed: ${e.message}`)}finally{i()}}const h=document.forms.login;h.addEventListener("submit",g);
