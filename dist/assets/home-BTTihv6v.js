import{f as T,a as A}from"./update-C0ONWQeW.js";import{d as q,o as j}from"./listings-Cx42XGGI.js";import{s as C,h as k}from"./loadingSpinner-D-kshPRo.js";import{s as B}from"./alertMessage-Dl9VQ_2y.js";import{i as N,f as P}from"./pagination-BipjXRMn.js";import"./index-CWKkjwGO.js";const M=localStorage.getItem("token"),E=document.querySelector("#unregistered-welcome-message");function H(e,a){document.getElementById(e).addEventListener("click",function(){const n=document.getElementById(a),t=n.value.trim();t&&/^[^@]+@[^@]+\.[a-zA-Z]{2,}$/.test(t)?(n.value="",B("Thank you for subscribing!",3e3)):alert("Please enter a valid email address.")})}function O(e,a,n=100){const t=document.getElementById(e);if(!t){console.error(`Element with ID '${e}' not found.`);return}let i=0;function s(){i<a.length&&(t.textContent+=a.charAt(i),i++,setTimeout(s,n))}s()}function J(){M?E.classList.add("hidden"):E.classList.remove("hidden")}let o=0;async function R(){C();try{const{data:e}=await T();return e.sort((a,n)=>new Date(n.created)-new Date(a.created)),e.slice(0,3)}catch(e){return console.error("Failed to fetch listing:",e),[]}finally{k()}}async function z(){const e=await R(),a=document.querySelector("#image-carousel"),n=document.querySelector("#dots-container");a.innerHTML="",n.innerHTML="",e.forEach((s,f)=>{const d=document.createElement("div");d.classList.add("flex","w-full","h-72","md:h-[400px]","lg:h-[500px]","overflow-hidden","carousel-slide");const l=document.createElement("img");l.classList.add("w-full","object-cover","h-full"),s.media?.[0]?(l.src=s.media[0].url,l.alt=s.media[0].alt):(l.src=q,l.alt="No image available");const u=document.createElement("div");u.classList.add("absolute","top-0","left-0","w-full","h-full","bg-black","bg-opacity-40");const r=document.createElement("p");r.textContent=s.title,r.classList.add("font-heading","text-white","text-xl","absolute","top-1/2","transform","-translate-y-1/2","left-1/2","-translate-x-1/2","max-w-52","truncate","sm:max-w-sm","md:max-w-md","lg:max-w-3xl","md:text-xl","lg:text-3xl");const c=document.createElement("a");c.textContent="View items",c.classList.add("font-body","text-sm","py-1.5","px-8","rounded-lg","md:text-base","text-white","bg-black","absolute","bottom-4","left-1/2","transform","-translate-x-1/2","border","border-gray-600","hover:bg-customGray","hover:text-gray-300","cursor-pointer"),c.addEventListener("click",()=>{localStorage.setItem("listingID",JSON.stringify(s.id)),window.location.href="./listing/listing.html"}),d.append(l,u,r,c),a.appendChild(d);const m=document.createElement("div");m.classList.add("single-dot","w-2","h-2","md:w-3","md:h-3","mx-1","bg-gray-400","rounded-full","inline-block","transition-bg","duration-600","ease-in-out","hover:bg-gray-700","cursor-pointer"),m.addEventListener("click",()=>{o=f,w(o)}),n.appendChild(m)});const t=document.createElement("button");t.id="prev-btn",t.classList.add("absolute","top-1/2","left-6","md:left-10","transform","-translate-y-1/2"),t.innerHTML='<i class="fa-solid fa-chevron-left text-white text-2xl"></i>',t.onclick=D;const i=document.createElement("button");i.id="next-btn",i.classList.add("absolute","top-1/2","right-6","md:right-10","transform","-translate-y-1/2"),i.innerHTML='<i class="fa-solid fa-chevron-right text-white text-2xl"></i>',i.onclick=S,a.appendChild(t),a.appendChild(i),w(o)}function w(e){const a=document.querySelectorAll(".carousel-slide"),n=document.querySelectorAll(".single-dot");a.forEach((t,i)=>{t.style.display=i===e?"block":"none"}),n.forEach((t,i)=>{t.classList.toggle("bg-gray-700",i===e),t.classList.toggle("bg-gray-400",i!==e)})}function S(){const e=document.querySelectorAll(".carousel-slide");o<e.length-1?o++:o=0,w(o)}function D(){const e=document.querySelectorAll(".carousel-slide");o>0?o--:o=e.length-1,w(o)}window.nextImage=S;window.prevImage=D;function F(e){const a=document.querySelector(".diamond-image-container"),n=document.createElement("div");if(n.id="diamond-image-container",n.classList.add("flex","flex-col","md:flex-row","md:justify-center","md:items-center"),Array.isArray(e)&&e.length>=3){const t=document.createElement("a");t.id="post-link1",t.classList.add("flex","flex-col","items-center","md:mr-24","cursor-pointer");const i=document.createElement("div");i.classList.add("relative","w-[100px]","h-[100px]","md:w-[150px]","md:h-[150px]","lg:w-[180px]","lg:h-[180px]","overflow-hidden","rotate-45","transition","duration-300","ease-linear","group");const s=document.createElement("img"),f=e[0],d=f.media[0];s.src=d?d.url:"default-image.jpg",s.alt=d?d.alt:"Default Image",s.classList.add("w-full","h-full","object-cover","-rotate-45","transition","duration-300","ease-linear","group-hover:scale-105"),i.appendChild(s),t.appendChild(i);const l=document.createElement("p");l.classList.add("mt-2","text-center","text-sm","md:text-base","dark:text-gray-300"),l.textContent=f.title,t.appendChild(l),t.addEventListener("click",()=>{localStorage.setItem("listingID",JSON.stringify(f.id)),window.location.href="./listing/listing.html"});const u=document.createElement("div");u.classList.add("flex","justify-center","mt-8","md:mt-0","md:space-x-24");const r=document.createElement("a");r.id="post-link2",r.classList.add("flex","flex-col","items-center","cursor-pointer");const c=document.createElement("div");c.classList.add("relative","w-[100px]","h-[100px]","md:w-[150px]","md:h-[150px]","lg:w-[180px]","lg:h-[180px]","overflow-hidden","rotate-45","mr-6","md:mr-0","transition","duration-300","ease-linear","group");const m=document.createElement("img"),y=e[1],p=y.media[0];m.src=p?p.url:"default-image.jpg",m.alt=p?p.alt:"Default Image",m.classList.add("w-full","h-full","object-cover","-rotate-45","transition","duration-300","ease-linear","group-hover:scale-105"),c.appendChild(m),r.appendChild(c);const v=document.createElement("p");v.classList.add("mt-2","text-center","text-sm","md:text-base","mr-6","md:mr-0","dark:text-gray-300"),v.textContent=y.title,r.appendChild(v),r.addEventListener("click",()=>{localStorage.setItem("listingID",JSON.stringify(y.id)),window.location.href="./listing/listing.html"});const g=document.createElement("a");g.id="post-link3",g.classList.add("flex","flex-col","items-center","cursor-pointer");const L=document.createElement("div");L.classList.add("relative","w-[100px]","h-[100px]","md:w-[150px]","md:h-[150px]","lg:w-[180px]","lg:h-[180px]","overflow-hidden","rotate-45","ml-6","md:ml-0","transition","duration-300","ease-linear","group");const h=document.createElement("img"),b=e[2],x=b.media[0];h.src=x?x.url:"default-image.jpg",h.alt=x?x.alt:"Default Image",h.classList.add("w-full","h-full","object-cover","-rotate-45","transition","duration-300","ease-linear","group-hover:scale-105"),L.appendChild(h),g.appendChild(L);const I=document.createElement("p");I.classList.add("mt-2","text-center","text-sm","md:text-base","ml-6","md:ml-0","dark:text-gray-300"),I.textContent=b.title,g.appendChild(I),g.addEventListener("click",()=>{localStorage.setItem("listingID",JSON.stringify(b.id)),window.location.href="./listing/listing.html"}),u.appendChild(r),u.appendChild(g),n.appendChild(t),n.appendChild(u),a.appendChild(n)}else console.error("listing does not contain enough posts:",e)}async function U(){C();try{const e=await A(),a=Array.isArray(e.data)?e.data:[];if(a.length===0){console.warn("No listings found in the response.");return}const n=a.filter(t=>t.tags&&t.tags.includes("myUniqueTag932"));if(n.length===0){console.warn("No listings found with the tag 'myUniqueTag932'.");return}F(n)}catch(e){console.error("Error reading all listings:",e)}finally{k()}}H("newsletter-button","subscribe-email");O("typewriter","TreasureBid Auction House",100);j();U();N();P();z();J();const V=document.getElementById("search-input");V.addEventListener("keydown",e=>{e.key==="Enter"&&(e.preventDefault(),document.getElementById("scroll-to-listings").scrollIntoView({behavior:"smooth"}))});
